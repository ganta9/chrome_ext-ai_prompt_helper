# プロンプト自動更新スクリプト

プロンプトファイルを自動スキャンして`content.js`の`scanPromptFolders()`関数を更新するスクリプトです。

## 使用方法

### 🖱️ ダブルクリック実行（推奨）

**Windows:**
- `update-prompts.bat` をダブルクリック

**macOS/Linux:**
- `update-prompts.sh` をダブルクリック（または右クリック→「開く」）

### ⌨️ コマンドライン実行

```bash
# Node.jsコマンド
node update-prompts.js

# または npm スクリプト
npm run update-prompts
```

## 前提条件

- **Node.js** がインストールされていること
  - ダウンロード: https://nodejs.org/
  - バージョン12以上推奨

## 機能

### ✅ 基本機能
- `prompts/`フォルダを自動スキャン
- 3階層構造（カテゴリ/サブカテゴリ/プロンプトファイル）を検出
- `src/content.js`内の`scanPromptFolders()`関数を自動更新
- 更新前に自動バックアップ作成（`.backup`ファイル）

### 📁 対象ファイル構造
```
prompts/
├── 001_基本プロンプト技法/
│   ├── 001_Zero-shot/
│   │   ├── 001_基本的なタスク指示.txt
│   │   └── 002_分類タスク.txt
│   └── 002_Few-shot/
│       └── 001_例を用いた分類.txt
└── 002_思考プロセス技法/
    └── 001_CoT/
        └── 001_段階的思考.txt
```

### 🔄 実行結果例
```
🚀 プロンプトスキャン自動更新スクリプト開始

📁 スキャン対象: ./prompts
✓ 3個のカテゴリを検出
  📂 001_基本プロンプト技法 (2個のサブカテゴリ)
    📁 001_Zero-shot (2個のプロンプト)
    📁 002_Few-shot (1個のプロンプト)
  📂 002_思考プロセス技法 (2個のサブカテゴリ)
    📁 001_CoT (1個のプロンプト)
    📁 002_ToT (1個のプロンプト)
  📂 003_ロールプレイ技法 (1個のサブカテゴリ)
    📁 001_専門家ペルソナ (2個のプロンプト)

✓ バックアップを作成しました: ./src/content.js.backup
✓ ./src/content.js を更新しました

🎉 プロンプトスキャン自動更新完了！
Chrome拡張機能を再インストールして変更を反映してください。
```

## ワークフロー

1. **プロンプトファイルを追加**
   - `prompts/`フォルダに新しい`.txt`ファイルを追加
   - 数字接頭語（001_, 002_など）で命名

2. **スクリプト実行**
   - ダブルクリックまたはコマンドライン実行

3. **Chrome拡張機能を再インストール**
   - chrome://extensions/ で拡張機能を削除→再インストール

4. **動作確認**
   - AIサイトで📝ボタンをクリックして新しいプロンプトが表示されることを確認

## エラー対処

### Node.jsが見つからない
- Node.js をインストール: https://nodejs.org/

### ファイルが見つからない
- `prompts/`フォルダが存在することを確認
- `src/content.js`ファイルが存在することを確認

### 更新に失敗した場合
- 自動的にバックアップから復元されます
- 手動復元: `src/content.js.backup` を `src/content.js` にコピー