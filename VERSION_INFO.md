# AI Prompt Helper Ver3.0.0

## バージョン概要

Ver3.0.0では、完全動的フォルダスキャン機能を実装し、事前定義されたファイルリストを完全に廃止しました。これにより、任意の名前のフォルダとファイルを自由に追加できるようになりました。

## 主要な変更点

### 1. 完全動的スキャン機能の実装

- **新機能**: `scanPromptFoldersCompletely()` 関数による完全動的フォルダ探索
- **範囲**: カテゴリ、サブカテゴリ、プロンプトファイルを001-999の範囲で自動スキャン
- **柔軟性**: 任意の名前のフォルダ・ファイルに対応（数字接頭語のみ必須）

### 2. 事前定義リストの完全廃止

Ver2.0.0で残っていた以下のハードコードされたリストを完全に削除：
- `categoryNames` 配列
- `subcategoryNames` 配列  
- `promptNames` 配列

### 3. パターンマッチング機能の追加

- **新機能**: `tryKnownPatterns()` 関数による既知パターンとの照合
- **効率性**: 一般的なプロンプト名パターンを使って効率的にファイル探索
- **拡張性**: 新しいパターンを簡単に追加可能

### 4. パフォーマンス最適化

- **早期終了**: 連続して見つからない場合の探索打ち切り機能
- **段階的スキャン**: カテゴリ→サブカテゴリ→プロンプトの段階的探索
- **メモリ効率**: 不要なHTTPリクエストを削減する仕組み

## 技術的な特徴

### フォルダ構造要件

```
prompts/
├── 001_カテゴリ名/
│   ├── 001_サブカテゴリ名/
│   │   ├── 001_プロンプト名.txt
│   │   └── 002_プロンプト名.txt
│   └── 002_サブカテゴリ名/
│       └── 001_プロンプト名.txt
└── 002_カテゴリ名/
    └── 001_サブカテゴリ名/
        └── 001_プロンプト名.txt
```

### 命名規則

- **数字接頭語**: 必須（001_, 002_, 003_...）
- **名前部分**: 完全に自由（任意の日本語・英語・記号）
- **ファイル拡張子**: .txt固定

### 新しい主要関数

1. **`scanPromptFoldersCompletely()`**
   - 完全動的スキャンのエントリーポイント
   - 001-999の範囲でカテゴリを探索

2. **`findExistingCategory()`**
   - 指定された接頭語のカテゴリを探索
   - サブカテゴリの存在確認による間接的な発見

3. **`findExistingSubcategory()`**
   - 指定された接頭語のサブカテゴリを探索
   - プロンプトファイルの存在確認による間接的な発見

4. **`tryKnownPatterns()`**
   - 既知のパターンを使った効率的なファイル探索
   - カテゴリ、サブカテゴリ、プロンプト名の組み合わせ試行

## Ver2.0.0からの移行

### 削除された機能
- ハードコードされたファイル名リスト
- 静的な探索範囲の制限

### 追加された機能
- 完全動的スキャン
- パターンマッチング
- パフォーマンス最適化

### 互換性
- フォルダ構造は同一（3階層、数字接頭語）
- manifest.jsonのweb_accessible_resourcesは同一
- UI表示ロジックは変更なし

## 使用方法

1. **フォルダ・ファイル追加**: prompts/フォルダに自由にフォルダ・ファイルを追加
2. **命名**: 001_, 002_の数字接頭語を付けて命名
3. **再インストール**: Chrome拡張機能を再インストールして反映

## パフォーマンス

- **スキャン範囲**: 最大999×999×999パターン
- **最適化**: 早期終了により実際のスキャン数を大幅削減
- **初期化時間**: 通常1-3秒以内

## 今後の拡張可能性

- スキャン範囲の動的調整
- より高度なパターン学習機能
- キャッシュ機能の追加
- リアルタイム更新機能